
filebeat.inputs:
  - type: filestream
    id: docker-logs
    prospector.scanner.symlinks: true
    parsers:
      - container:
          stream: all
          format: docker
    paths:
      - '/var/lib/docker/containers/*/*.log'

processors:
  - add_docker_metadata:
      host: "unix:///var/run/docker.sock"

output.file:
  enabled: true
  codec.json:
    pretty: true
  permissions: 0666
  path: "/tmp/filebeat"
  filename: filebeat.txt


# filebeat.inputs:
# - type: filestream
#   id: docker-logs
#   enabled: true
#   paths:
#     - /var/lib/docker/containers/*/*.log
#   parsers:
#     - container:
#         stream: stdout
#         format: docker
#   symlinks: true
#   processors:
#     - decode_json_fields:
#         fields: ["message"]
#         target: ""
#         overwrite_keys: true
#     - drop_fields:
#         fields: ["host", "agent", "ecs", "input", "container", "@metadata"]

# output.logstash:
#   hosts: ["logstash:5044"]

# output.elasticsearch:
#   hosts: ["http://elasticsearch:9200"]